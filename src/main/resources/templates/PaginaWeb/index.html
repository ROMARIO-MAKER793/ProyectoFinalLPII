<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CinemaNights - Tu Cine Favorito</title>
  <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" th:href="@{/css/PaginaWeb.css}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
	
	<style>
	.franja-estreno {
	  position: absolute;
	  top: 10px;
	  left: -35px;
	  background-color: #dc2626; /* rojo Tailwind: red-600 */
	  color: white;
	  font-weight: bold;
	  padding: 5px 40px;
	  transform: rotate(-45deg);
	  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
	  text-transform: uppercase;
	  font-size: 0.75rem;
	  letter-spacing: 1px;
	}
	</style>

  </head>
  <body class="bg-white text-white font-[Poppins]">
  	
	<!-- üåü NAVBAR -->
	<nav class="bg-gray-900 text-white font-[Poppins] p-4 flex justify-between items-center shadow-lg">
	  <!-- üé¨ Logo -->
	  <h1 class="text-2xl font-bold text-red-500 tracking-wide">üé¨ CinemaNights</h1>

	  <!-- üìÑ Enlaces principales -->
	  <ul class="flex space-x-6 font-semibold text-sm uppercase tracking-wide">
	    <li><a th:href="@{/PaginaWeb/index}" class="hover:text-red-400 transition">Inicio</a></li>
	    <li><a th:href="@{/cartelera}" class="hover:text-red-400 transition">Pel√≠culas</a></li>
	    <li><a th:href="@{/nosotros}" class="hover:text-red-400 transition">Nosotros</a></li>
	    <li><a th:href="@{/contacto}" class="hover:text-red-400 transition">Contacto</a></li>
	  </ul>

	  <!-- üîê Autenticaci√≥n -->
	  <div class="flex items-center gap-4">
	    <!-- Usuario autenticado -->
	    <div sec:authorize="isAuthenticated()" class="flex items-center gap-3">
	      <span class="text-sm">üëã Bienvenido, <strong th:text="${nombreCom}" class="text-red-400"></strong></span>
	      <a th:href="@{/logout}"
	         class="bg-white text-black px-3 py-1 rounded-md font-semibold hover:bg-gray-200 transition text-sm">
	         Cerrar sesi√≥n
	      </a>
	    </div>

	    <!-- Usuario NO autenticado -->
	    <div sec:authorize="!isAuthenticated()" class="flex gap-3">
	      <a th:href="@{/login}" 
	         class="px-4 py-2 rounded-md font-semibold bg-white text-black hover:bg-gray-200 transition text-sm">
	         Iniciar sesi√≥n
	      </a>
	      <a th:href="@{/registro}" 
	         class="px-4 py-2 rounded-md font-semibold bg-red-600 text-white hover:bg-red-700 transition text-sm">
	         Registrarse
	      </a>
	    </div>
	  </div>
	</nav>

    <section class="relative w-full h-[580px] mt-[0px] overflow-hidden group" id="carousel">
  	<!-- Slides din√°micos -->
  	  <div th:each="p, stat : ${peliculas}"
  	       th:class="'slide ' + (${stat.index == 0} ? 'active' : '')"
  	       th:style="'background-image: url(' + @{/img/{imagen}(imagen=${p.imagen})} + ')'">

  	    <div class="absolute inset-0 slide-content flex flex-col justify-end pb-12 pl-12 text-white">
  	      <h2 class="text-4xl font-bold mb-2" th:text="${p.titulo}">T√≠tulo pel√≠cula</h2>
  	      <p class="text-gray-200 mb-4 max-w-lg" th:text="${p.descripcion}">Descripci√≥n breve</p>

  	      <div class="flex gap-3 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
			<a th:href="@{'/pelicula/detalle/' + ${p.idPelicula}}" 
				               class="mt-2 bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-full transition">
				               Ver Detalle
				            </a>
  	        <!--<button class="bg-white text-black font-semibold px-4 py-2 rounded hover:bg-gray-200">Ver detalles</button>-->
  	        <!--<button class="bg-red-600 text-white font-semibold px-4 py-2 rounded hover:bg-red-700">Comprar</button>-->
  	      </div>
  	    </div>
  	  </div>

  	  <!-- Botones -->
  	  <div class="absolute bottom-5 right-5 flex gap-3 z-20">
  	    <button id="prev" class="bg-black/50 hover:bg-black/70 text-white px-4 py-2 rounded-full">‚Üê</button>
  	    <button id="next" class="bg-black/50 hover:bg-black/70 text-white px-4 py-2 rounded-full">‚Üí</button>
  	  </div>

  	  <!-- Indicadores -->
  	  <div id="indicators" class="absolute bottom-5 left-1/2 transform -translate-x-1/2 flex gap-3 z-20"></div>
  	</section>
	
	<!-- Carrusel Inferior-->
	<section class="py-5 bg-white relative">
	  <div class="container mx-auto relative">
	    <h2 class="text-4xl text-center mb-4 font-bold font-[Poppins]  uppercase text-red-500 ">üéûÔ∏è Pel√≠culas</h2>

	    <!-- Contenedor del carrusel -->
	    <div class="relative flex items-center justify-center">

	      <!-- Bot√≥n izquierda -->
	      <button 
	        class="scroll-btn left absolute -left-10 z-10 bg-red-600 hover:bg-red-700 text-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg transition">
	        <i class="bi bi-chevron-left text-2xl"></i>
	      </button>

	      <!-- Carrusel centrado -->
	      <div id="novedadesCarrusel" 
	           class="flex gap-4 overflow-hidden scroll-smooth w-[90%] mx-auto py-4 justify-center">
	        <div class="pelicula-card flex-shrink-0" 
	             th:each="p, iterStat : ${novedades}" 
	             th:if="${iterStat.index < 12}">
	          <img th:src="@{'/img/' + ${p.imagen}}" 
	               th:alt="${p.titulo}" 
	               class="w-full h-full object-cover rounded-lg">
				   <!-- üü• Franja de Estreno -->
				    <div th:if="${p.estreno}" class="franja-estreno">Estreno</div>
	          
	          <div class="overlay absolute inset-0 bg-black/70 opacity-0 flex flex-col items-center justify-center text-center p-3 rounded-lg transition-opacity duration-300 hover:opacity-100">
	            <h5 class="text-white font-bold text-lg" th:text="${p.titulo}"></h5>
	            <a th:href="@{'/pelicula/detalle/' + ${p.idPelicula}}" 
	               class="mt-2 bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-full transition">
	               Ver Detalle
	            </a>
	          </div>
	        </div>
	      </div>

	      <!-- Bot√≥n derecha -->
	      <button 
	        class="scroll-btn right absolute -right-10 z-10 bg-red-600 hover:bg-red-700 text-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg transition">
	        <i class="bi bi-chevron-right text-2xl"></i>
	      </button>
	    </div>
	  </div>
	</section>


	<!-- ‚ö´ FOOTER -->
	<footer class="bg-black text-white pt-10 pb-6">
	  <div class="container mx-auto px-4">
	    <div class="flex flex-col md:flex-row justify-between items-center md:items-start gap-8">
	      <div class="text-center md:text-left">
	        <h2 class="text-2xl font-bold text-red-500 mb-2">üé¨ CinemaNights</h2>
	        <p class="text-white max-w-sm">La mejor experiencia de cine, con promociones, dulcer√≠a y preventas exclusivas para nuestros clientes.</p>
	      </div>
	      <div class="text-center md:text-left">
	        <h3 class="font-semibold mb-2">Enlaces</h3>
	        <ul>
	          <li><a th:href="@{/PaginaWeb/index}" class="hover:text-red-500 transition-colors">Inicio</a></li>
	          <li><a th:href="@{/cartelera}" class="hover:text-red-500 transition-colors">Pel√≠culas</a></li>
			  <li><a th:href="@{/nosotros}" class="hover:text-red-500 transition-colors">Nosotros</a></li>
	          <li><a th:href="@{/contacto}" class="hover:text-red-500 transition-colors">Contacto</a></li>
	        </ul>
	      </div>
	      <div class="text-center md:text-left">
	        <h3 class="font-semibold mb-2">S√≠guenos</h3>
	        <div class="flex gap-4 justify-center md:justify-start">
	          <a href="#" class="text-white hover:text-red-500 text-xl transition-colors"><i class="bi bi-facebook"></i></a>
	          <a href="#" class="text-white hover:text-red-500 text-xl transition-colors"><i class="bi bi-instagram"></i></a>
	          <a href="#" class="text-white hover:text-red-500 text-xl transition-colors"><i class="bi bi-twitter"></i></a>
	          <a href="#" class="text-white hover:text-red-500 text-xl transition-colors"><i class="bi bi-youtube"></i></a>
	        </div>
	      </div>
	      <div class="text-center md:text-left">
	        <h3 class="font-semibold mb-2">Contacto</h3>
	        <p class="text-white"><i class="bi bi-geo-alt-fill me-1"></i> Av. Cine 123, Lima, Per√∫</p>
	        <p class="text-white"><i class="bi bi-telephone-fill me-1"></i> +51 987 654 321</p>
	        <p class="text-white"><i class="bi bi-envelope-fill me-1"></i> info@CinemaNights.com</p>
	      </div>
	    </div>
	    <hr class="my-6 border-gray-700">
	    <p class="text-center  text-white font-bold text-sm">&copy; 2025 CinemaNights. Todos los derechos reservados.</p>
	  </div>
	</footer>

	<script src="/script/PaginaWeb.js"></script>
	
	<script>
	document.addEventListener('DOMContentLoaded', () => {
	  const carrusel = document.getElementById('novedadesCarrusel');
	  const prevBtn = document.querySelector('.scroll-btn.left');
	  const nextBtn = document.querySelector('.scroll-btn.right');

	  // Duplicamos contenido para efecto infinito
	  carrusel.innerHTML += carrusel.innerHTML;

	  let speed = 1; // velocidad px/frame
	  let raf;

	  function autoScroll() {
	    carrusel.scrollLeft += speed;

	    // Reinicio suave al llegar al medio (porque est√° duplicado)
	    if (carrusel.scrollLeft >= carrusel.scrollWidth / 2) {
	      carrusel.scrollLeft = 0;
	    }
	    raf = requestAnimationFrame(autoScroll);
	  }
	  autoScroll();

	  // Botones
	  prevBtn.addEventListener('click', () => {
	    carrusel.scrollBy({ left: -300, behavior: 'smooth' });
	  });

	  nextBtn.addEventListener('click', () => {
	    carrusel.scrollBy({ left: 300, behavior: 'smooth' });
	  });

	  // Pausar al pasar mouse
	  carrusel.addEventListener('mouseenter', () => cancelAnimationFrame(raf));
	  carrusel.addEventListener('mouseleave', () => autoScroll());
	});
	</script>
</body>


</html>

