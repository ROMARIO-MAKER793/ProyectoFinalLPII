<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
  <meta charset="UTF-8">
  <title>Listado de Funciones - Cine Online</title>

  <!-- Fuente Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- FontAwesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- DataTables -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">
</head>
<body class="bg-gray-100 font-poppins">

<!-- Header -->
<header class="fixed top-0 w-full z-50 bg-gradient-to-r from-blue-700 to-indigo-700 shadow-lg flex items-center justify-between px-6 py-4">
  <div class="flex items-center gap-3 text-lg font-semibold text-white">
    <i class="fa-solid fa-calendar-days"></i>
    <span>Listado de Funciones</span>
  </div>
  <div class="text-white/90 text-sm">
    Bienvenido, <span class="font-semibold text-white" th:text="${adminNombre}">Administrador</span>
  </div>
</header>

<!-- Layout principal -->
<div class="flex pt-20 min-h-screen">

  <!-- Sidebar -->
  <aside class="w-60 bg-gray-900 text-gray-200 fixed top-20 left-0 h-[calc(100vh-5rem)] overflow-y-auto shadow-2xl rounded-r-2xl">
    <nav class="flex flex-col mt-4 space-y-1">

      <a th:href="@{/mantenimientoPeliculas/lista}" class="flex items-center gap-3 px-6 py-3 rounded-lg hover:bg-gray-800 transition-all">
        <i class="fa-solid fa-film text-blue-400"></i> Lista de Películas
      </a>

      <a th:href="@{/mantenimientoPeliculas/nuevo}" class="flex items-center gap-3 px-6 py-3 rounded-lg hover:bg-gray-800 transition-all">
        <i class="fa-solid fa-plus text-blue-400"></i> Registrar Película
      </a>

      <a th:href="@{/PaginaAdmin/funciones/listar}" class="flex items-center gap-3 px-6 py-3 rounded-lg bg-blue-600/20 text-white font-medium border-l-4 border-blue-400">
        <i class="fa-solid fa-list text-blue-400"></i> Listar Funciones
      </a>

      <a th:href="@{/Cliente/listar}" class="flex items-center gap-3 px-6 py-3 rounded-lg hover:bg-gray-800 transition-all">
        <i class="fa-solid fa-users text-blue-400"></i> Lista de Clientes
      </a>

      <a th:href="@{/logout}" class="flex items-center gap-3 px-6 py-3 rounded-lg hover:bg-red-700 transition-all mt-auto">
        <i class="fa-solid fa-right-from-bracket text-red-400"></i> Cerrar sesión
      </a>
    </nav>
  </aside>

  <!-- Contenido principal -->
  <main class="ml-60 flex-1 p-8">
    <div class="max-w-6xl mx-auto bg-white rounded-2xl shadow-xl p-8">

      <div class="flex items-center justify-center mb-6">
        <h2 class="text-3xl font-semibold text-blue-700">
          <i class="fa-solid fa-film mr-2 text-blue-500"></i> Funciones Registradas
        </h2>
      </div>

      <div class="overflow-hidden rounded-xl border border-gray-200 shadow-md">
        <table id="tablaFunciones" class="table table-striped table-hover align-middle mb-0">
          <thead class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white">
            <tr>
              <th>ID</th>
              <th>Película</th>
              <th>Sala</th>
              <th>Fecha</th>
              <th>Hora Inicio</th>
              <th>Hora Fin</th>
              <th>Opciones</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="f : ${listaFunciones}">
              <td th:text="${f.idFuncion}"></td>
              <td th:text="${f.pelicula.titulo}"></td>
              <td th:text="${f.sala.nombreSala}"></td>
              <td th:text="${#temporals.format(f.fechaFuncion, 'dd/MM/yyyy')}"></td>
              <td th:text="${f.horaInicio}"></td>
              <td th:text="${f.horaFin}"></td>
              <td class="text-center">
                <div class="flex gap-2 justify-center">
                  <a th:href="@{/PaginaAdmin/funciones/editar/{id}(id=${f.idFuncion})}"
                     class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-lg text-sm shadow transition">
                    <i class="fa-solid fa-pen-to-square"></i> Editar
                  </a>
                  <a th:href="@{/PaginaAdmin/funciones/eliminar/{id}(id=${f.idFuncion})}"
                     class="bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg text-sm shadow transition"
                     th:onclick="return confirm('¿Seguro que deseas eliminar esta función?');">
                    <i class="fa-solid fa-trash"></i> Borrar
                  </a>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>
</div>

<!-- JS -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
<script>
  $(document).ready(function () {
    $('#tablaFunciones').DataTable({
      "language": { "url": "//cdn.datatables.net/plug-ins/1.13.7/i18n/es-ES.json" },
      "pageLength": 5,
      "lengthMenu": [5, 10, 25, 50, 100],
      "columnDefs": [{ "orderable": false, "targets": [6] }]
    });
  });
</script>

</body>
</html>
